(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88],{9944:function(e,a,s){Promise.resolve().then(s.bind(s,7668))},7668:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return i}});var n=s(7437),c=s(2265);let t="http://Noel-ALB-780957247.ap-south-1.elb.amazonaws.com/api";function i(){let[e,a]=(0,c.useState)([]),[s,i]=(0,c.useState)({code:"",type:"PERCENT",value:10,active:!0});async function l(){let e=await fetch("".concat(t,"/admin/discounts"),{credentials:"include"});a((await e.json()).codes||[])}async function d(){(await fetch("".concat(t,"/admin/discounts"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(i({code:"",type:"PERCENT",value:10,active:!0}),l()):alert("Create failed")}async function o(e){(await fetch("".concat(t,"/admin/discounts/").concat(e.id),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&l()}async function r(e){confirm("Delete?")&&(await fetch("".concat(t,"/admin/discounts/").concat(e),{method:"DELETE",credentials:"include"})).ok&&l()}return(0,c.useEffect)(()=>{l()},[]),(0,n.jsxs)("section",{className:"container",children:[(0,n.jsx)("div",{className:"topbar",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"badge",children:"Admin"}),(0,n.jsx)("h2",{children:"Discount Codes"})]})}),(0,n.jsxs)("div",{className:"form",children:[(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{children:"Code"}),(0,n.jsx)("input",{className:"input",value:s.code,onChange:e=>i({...s,code:e.target.value.toUpperCase()})})]}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{children:"Type"}),(0,n.jsxs)("select",{className:"input",value:s.type,onChange:e=>i({...s,type:e.target.value}),children:[(0,n.jsx)("option",{value:"PERCENT",children:"PERCENT"}),(0,n.jsx)("option",{value:"FIXED",children:"FIXED"})]})]}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{children:"Value"}),(0,n.jsx)("input",{className:"input",type:"number",value:s.value,onChange:e=>i({...s,value:Number(e.target.value)})})]}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("label",{children:"Active"}),(0,n.jsx)("input",{type:"checkbox",checked:!!s.active,onChange:e=>i({...s,active:e.target.checked})})]}),(0,n.jsx)("div",{className:"actions",children:(0,n.jsx)("button",{className:"btn",onClick:d,children:"Create"})})]}),(0,n.jsx)("div",{className:"section",children:e.map(e=>(0,n.jsx)("div",{className:"card",children:(0,n.jsxs)("div",{className:"pad",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:e.code})," ",(0,n.jsxs)("span",{className:"sub",children:["(",e.type," ",e.value,")"]})]}),(0,n.jsxs)("div",{className:"actions",children:[(0,n.jsxs)("label",{style:{marginRight:8},children:["Active ",(0,n.jsx)("input",{type:"checkbox",defaultChecked:e.active,onChange:a=>o({id:e.id,active:a.target.checked})})]}),(0,n.jsx)("button",{className:"btn ghost",onClick:()=>r(e.id),children:"Delete"})]})]})},e.id))})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=9944)}),_N_E=e.O()}]);